# Bridge Pattern

## Khái niệm

Bridge Pattern (mẫu cầu) là một mẫu thiết kế thuộc nhóm cấu trúc. Mục tiêu chính của mẫu này là tách rời một lớp lớn hoặc một nhóm các lớp có mối quan hệ chặt chẽ với nhau ra thành các phần có thể phát triển một cách độc lập.

## Đặt vấn đề

Hãy tưởng tượng bạn có một lớp vehicle với hai subclass là BicycleBike và MotorBike. Bây giờ, bạn muốn mở rộng tính năng bằng cách thêm màu sắc cho mỗi loại phương tiện, và bạn tạo ra hai thuộc tính là Red và Blue. Với cách tiếp cận này, bạn sẽ phải tạo ra tổng cộng bốn lớp con như BlueBicycleBike và RedMotorBike.

![](Images/Problem%20Diagram-Page-2.png)

Khi bạn muốn thêm một loại phương tiện hoặc một màu sắc mới, bạn sẽ cần tạo thêm nhiều lớp con. Điều này làm cho hệ thống trở nên phức tạp và khó kiểm soát.

## Giải pháp

Vấn đề ở đây là chúng ta đang cố gắng tích hợp quá nhiều tính năng vào một lớp abstract, trong khi mỗi tính năng đều có tiềm năng phát triển theo một hướng riêng biệt.

![](Images/Solution%20Diagram-Page-3.png)

Bridge Pattern giải quyết vấn đề này bằng cách tách biệt lớp abstract và các đối tượng thực thi, sau đó kết nối chúng lại với nhau. Trong ví dụ này, một phương tiện sẽ có một màu sắc, tạo ra một mối quan hệ "has-a" (có một).

## Cấu Trúc
![](Images/Struct%20Diagram.png)

- **The Abstraction**: Cung cấp mức độ trừu tượng cho việc quản lý các công việc do các đối tượng cụ thể thực hiện (Implementation).
- **The Implementation**: Định nghĩa giao diện cho các đối tượng cụ thể khác để thực hiện. Thường là một giao diện xác định các tác vụ cần thiết cho lớp abstraction.
- **Concrete Implementations**: Chứa logic cụ thể và thực hiện các tác vụ được định nghĩa bởi lớp Implementation.
- **Refined Abstractions**: Thực hiện và mở rộng các phương thức được xác định trong lớp Abstraction.
## Ví dụ áp dụng Bridge Pattern

![](Images/Untitled%20Diagram.png )

Để hiểu rõ hơn về cách Bridge Pattern hoạt động, hãy xem xét ví dụ về một hệ thống ngân hàng cung cấp các loại tài khoản khác nhau:

Account.java

```java
public interface Account {
    void openAccount();
}
```

CheckingAccount.java

```java
public class CheckingAccount implements Account{
    @Override
    public void openAccount() {
        System.out.println("Checking Account!");
    }
}
```

TutorialAccount.java

```java
public class TutorialAccount implements Account{
    @Override
    public void openAccount() {
        System.out.println("Xin vui lòng chọn ngôn ngữ");
        System.out.println("Please select your language");
    }
}
```

Bank.java

```java
public abstract class Bank {
    protected Account account;

    public Bank(Account account) {
        this.account = account;
    }

    public abstract void openAccount();
}
```

MMBank.java

```java
public class MMBank extends Bank {

    public MMBank(Account account) {
        super(account);
    }

    @Override
    public void openAccount() {
        System.out.println("Chào mừng đến với MBBank");
        System.out.println("Welcome to MMBank");
        account.openAccount();
    }
}
```

TPBank.java

```java
public class TPBank extends Bank {

    public TPBank(Account account) {
        super(account);
    }

    @Override
    public void openAccount() {
        System.out.println("Chào mừng đến với TPBank");
        System.out.println("Welcome to TPBank");
        this.account.openAccount();
    }
}
```

demo.java

```java
public class demo {
    public static void main(String[] args) {
        Bank bank = new TPBank(new TutorialAccount());
        bank.openAccount();
        System.out.println();
        bank = new TPBank(new CheckingAccount());
        bank.openAccount();
        System.out.println();
        bank = new MMBank(new TutorialAccount());
        bank.openAccount();
    }
}
```

Trong ví dụ trên, Bank là một lớp trừu tượng kết hợp với interface Account. Các lớp cụ thể như TPBank và MMBank kế thừa từ lớp Bank và quyết định cách họ muốn mở tài khoản dựa trên loại tài khoản cụ thể (như CheckingAccount hoặc TutorialAccount). Nhờ sử dụng Bridge Pattern, chúng ta có thể mở rộng cả hai hệ thống (loại ngân hàng và loại tài khoản) một cách độc lập mà không làm ảnh hưởng đến nhau.

Kết quả:

```
Chào mừng đến với TPBank
Welcome to TPBank
Xin vui lòng chọn ngôn ngữ
Please select your language

Chào mừng đến với TPBank
Welcome to TPBank
Checking Account!

Chào mừng đến với MBBank
Welcome to MMBank
Xin vui lòng chọn ngôn ngữ
Please select your language
```

Kết quả chạy chương trình cho thấy cách Bridge Pattern cho phép tạo ra các kết hợp độc lập giữa các lớp và các thực thi của chúng.