# Abstract Factory

## Giới thiệu

- Định nghĩa: Abstract Factory là một Design Pattern cung cấp một interface để tạo ra các họ đối tượng liên quan với nhau một cách linh hoạt.
- Mục đích: Abstract Factory được sử dụng để tạo ra các họ đối tượng liên quan, nhằm các mục đích:
  - Giúp dễ dàng tạo các đối tượng thuộc cùng một họ.
  - Giúp dễ dàng thay đổi cách tạo các họ đối tượng.
  - Giúp dễ dàng kiểm tra các đối tượng thuộc cùng một họ.
  - Tách biệt implementation cuar các objects khỏi business logic sử dụng chúng.
  - Cho phép thay đổi cách tạo objects mà không ảnh hưởng tới phần còn lại của code.
- Ý tưởng chính:
    - Abstract Factory định nghĩa interfaces cho một họ các sản phẩm liên quan. 
    - Các Concrete Factory implement các interfaces này để tạo ra các sản phẩm cụ thể.
    - Code sử dụng chỉ tương tác với interfaces, không phụ thuộc vào các Concrete Factory hoặc sản phẩm cụ thể.

## Đặt vấn đề

Giả sử bạn đang làm một ứng dụng gọi món ăn cho nhà hàng. Các món ăn được phân thành các nhóm:

- Món lẩu: Thịt bò, rau củ, nấm hương
- Món phở: Bánh phở, thịt bò, giá đỗ
- Món bún: Bún, nem nuong, chả giò

Bạn muốn có thể dễ dàng thêm nhóm món mới mà không ảnh hưởng tới code.

Ví dụ thêm nhóm món bò kho, gồm thịt bò, khoai tây, cà rốt.

## Giải quyết

Đầu tiên định nghĩa interface cho các loại thành phần món ăn:

- IProtein: thịt bò, tôm,..
- ICarbohydrate: mì, bún, bánh phở,..
- IVegetable: cà rốt, giá đỗ,..

Tiếp theo, tạo Abstract Factory định nghĩa các phương thức tạo các thành phần trên.

Sau đó tạo các Concrete Factory tương ứng với từng nhóm món:

LauFactory, PhoFactory, BunFactory,...

Mỗi Factory implement cách tạo ra các thành phần cho món ăn của nhóm đó.

Khi thêm nhóm mới, ta chỉ việc tạo thêm Concrete Factory tương ứng.

## Cấu trúc

Abstract Factory có cấu trúc phức tạp hơn so với các Design Pattern khác. Cấu trúc của Abstract Factory bao gồm các thành phần sau:

- Lớp abstract factory: Lớp abstract factory cung cấp interface để tạo các đối tượng của nhiều lớp.
- Lớp con của abstract factory: Các lớp con của abstract factory triển khai các phương thức của interface để tạo các đối tượng của nhiều lớp theo cách tùy ý.
- Lớp cụ thể: Các lớp cụ thể tạo các đối tượng của các lớp con của abstract factory.

## Cách triển khai

Abstract Factory có thể được triển khai theo nhiều cách khác nhau. Trong Java, có một số cách triển khai phổ biến như sau:

- Sử dụng interface: Phương pháp này sử dụng interface để cung cấp các phương thức để tạo các đối tượng của nhiều lớp.
- Sử dụng abstract class: Phương pháp này sử dụng abstract class để cung cấp các phương thức để tạo các đối tượng của nhiều lớp.

## Ví dụ

Dưới đây là một ví dụ minh họa về Abstract Factory trong Java:


```java
public abstract class AbstractFactory {
  
  public abstract Shape createShape();

  public abstract Color createColor();
}

public class ShapeFactory extends AbstractFactory {

    @Override
    public Shape createShape() {
        return new Circle();
    }

    @Override
    public Color createColor() {
        return new Red();
    }
}

public class ColorFactory extends AbstractFactory {

    @Override
    public Shape createShape() {
        return new Rectangle();
    }

    @Override
    public Color createColor() {
        return new Blue();
    }
}

public class Main {

    public static void main(String[] args) {
        AbstractFactory shapeFactory = new ShapeFactory();
        Shape shape = shapeFactory.createShape();

        AbstractFactory colorFactory = new ColorFactory();
        Color color = colorFactory.createColor();
    }
}
```

## So sánh

Abstract Factory có thể được so sánh với một số Design Pattern tương tự, chẳng hạn như:

- Factory Method: Factory Method cũng cung cấp một cách để tạo các đối tượng của nhiều lớp một cách linh hoạt. Tuy nhiên, Factory Method chỉ cung cấp một phương thức để tạo các đối tượng của một lớp.
- Builder Pattern: Builder Pattern cũng cung cấp một cách để tạo các đối tượng phức tạp



## Kết luận

    Tóm tắt ưu/nhược điểm của Pattern
    Hướng dẫn khi nào nên & không nên sử dụng Pattern
